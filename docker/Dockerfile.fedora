FROM fedora:latest

# Install runtime dependencies
RUN dnf install -y \
    python3 \
    python3-requests \
    python3-click \
    python3-tomli \
    systemd \
    && dnf clean all

WORKDIR /build

# Copy built RPM package
COPY rpm-packages/command-line-assistant-*.rpm ./

# Install the package
RUN dnf install -y command-line-assistant-*.rpm

# Copy test script
COPY docker/test-package.sh /test-package.sh
RUN chmod +x /test-package.sh

# Run tests
CMD ["/test-package.sh"]

